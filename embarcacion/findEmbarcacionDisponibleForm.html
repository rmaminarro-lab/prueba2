<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale-1.0">
    <title>Buscar Embarcación Disponible</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container">
        <h1>Buscar Embarcación Disponible (Req. C.1)</h1>
        
        <form action="/findEmbarcacionDisponible" method="get">
            <div class="form-group">
                <label for="fechaInicio">
                    Fecha de Inicio <span class="required">*</span>
                </label>
                <input type="date" 
                       id="fechaInicio"
                       name="fechaInicio" 
                       th:value="${fechaInicio}"
                       required>
            </div>
            
            <div class="form-group">
                <label for="fechaFin">
                    Fecha de Fin <span class="required">*</span>
                </label>
                <input type="date" 
                       id="fechaFin"
                       name="fechaFin" 
                       th:value="${fechaFin}"
                       required>
            </div>
            
            <div class="btn-group">
                <button type="submit" class="btn btn-primary">Buscar Disponibilidad</button>
                <a href="/" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
        
        <div th:if="${buscado}">
            <h2 class="results-title">Resultados de la Búsqueda</h2>
            
            <div th:if="${error != null}" class="error-box">
                <span th:text="${error}"></span>
            </div>
            
            <div th:if="${error == null and embarcaciones != null and !embarcaciones.isEmpty()}">
                <div class="info-box">
                    Se encontraron <strong th:text="${embarcaciones.size()}"></strong> embarcaciones disponibles 
                    entre <strong th:text="${fechaInicio}"></strong> y <strong th:text="${fechaFin}"></strong>.
                </div>
                
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Matrícula</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Plazas</th>
                                <th>Dimensiones</th>
                                <th>Patrón Asignado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="emb : ${embarcaciones}">
                                <td th:text="${emb.matricula}">MAT001</td>
                                <td th:text="${emb.nombre}">Poseidón</td>
                                <td th:text="${emb.tipo}">VELERO</td>
                                <td th:text="${emb.numPlazas}">6</td>
                                <td th:text="${emb.dimensiones}">8x3 m</td>
                                <td th:text="${emb.dniPatron != null ? 'Sí (' + emb.dniPatron + ')' : 'No'}">Sí</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div th:if="${error == null and (embarcaciones == null or embarcaciones.isEmpty())}">
                <div class="warning-box">
                    No se encontraron embarcaciones disponibles para las fechas seleccionadas.
                </div>
            </div>
            
        </div>
        
    </div>
</body>
</html>